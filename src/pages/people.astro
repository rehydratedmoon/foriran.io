---
import GlobalLayout from '../layouts/GlobalLayout.astro';
import Person from '../components/card/Person.astro';
import neo4j from 'neo4j-driver';
const driver = neo4j.driver(
  import.meta.env.DB_URI,
  neo4j.auth.basic(import.meta.env.DB_USERNAME, import.meta.env.DB_PASSWORD)
);

const session = driver.session();
let records = null;
try {
  const result = await session.run('MATCH (a:Person) RETURN a');
  records = result.records.map((rec) => rec.get(0));
} catch (err) {
  console.log('🚀 ~ err:', err);
} finally {
  await session.close();
}
console.log('🚀 ~ records:', records);
---

<GlobalLayout title='افراد مهم'>
  <h1 class='H1'>افراد مهم</h1>
  <p>فهرستی از افرادی که در خیزش زن زندگی آزادی مطرح بودند</p>
  <ul class='mt-10 list-none grid grid-min-col-15rem gap-4'>
    {records?.map((person) => <Person data={person.properties} />)}
  </ul>
</GlobalLayout>
